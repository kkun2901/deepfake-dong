# 딥페이크 탐지 앱 - 프로젝트 문서

## 1. 프로젝트 개요

### 1) 제품명
**딥페이크 탐지 앱 (Deepfake Detector App)**

### 2) 프로젝트 소개
Android 모바일 환경에서 실시간으로 딥페이크 영상을 탐지하고 분석하는 통합 애플리케이션입니다. React Native와 FastAPI 백엔드를 결합하여 구축되었으며, 플로팅 위젯 기반 스크린 레코딩과 딥러닝 모델 앙상블을 통한 정확한 딥페이크 탐지를 제공합니다.

사용자는 현재 사용 중인 앱 화면(예: 유튜브, 인스타그램, 틱톡 등)을 별도 앱 전환 없이 바로 녹화하고 분석할 수 있어, 의심스러운 영상을 발견 즉시 검증할 수 있습니다. 분석 결과는 타임라인 세그먼트 기반으로 제공되며, 딥러닝 연구용 데이터셋(JSONL, CSV, JSON)으로 자동 변환되어 다운로드 가능합니다.

### 3) 프로젝트 목표
- **즉시성**: 모바일 환경에서 실시간 딥페이크 탐지 서비스 제공
- **정확성**: 두 개의 Vision Transformer 모델 앙상블을 통한 높은 탐지 정확도 달성
- **사용성**: 앱 전환 없이 플로팅 위젯으로 즉시 녹화 및 분석 가능
- **확장성**: 분석 결과를 딥러닝 학습 데이터셋으로 자동 변환하여 연구 활용 가능
- **효율성**: 얼굴 감지 기반 스마트 프레임 추출 및 동적 프레임 샘플링으로 처리 속도 최적화

### 4) 해결하고자 하는 문제

#### 주요 문제점
1. **정보 검증의 어려움**: 소셜 미디어에서 빠르게 확산되는 딥페이크 영상을 신속하게 검증할 수 있는 도구 부족
2. **접근성 문제**: 기존 딥페이크 탐지 도구는 주로 PC 기반으로, 모바일 사용자가 즉시 사용하기 어려움
3. **검증 시간 지연**: 의심스러운 영상을 발견했을 때 별도 앱으로 전환하거나 파일을 다운로드하는 과정에서 시간 소모
4. **연구 데이터 부족**: 딥페이크 탐지 모델 연구를 위한 구조화된 데이터셋 생성의 어려움
5. **오탐률 문제**: 정적 화면이나 얼굴이 없는 영상에서의 오탐으로 인한 신뢰도 저하

#### 해결 방안
- 플로팅 위젯 기반 실시간 스크린 레코딩으로 즉시 녹화 및 분석 가능
- 모바일 네이티브 앱 제공으로 언제 어디서나 접근 가능
- 앱 전환 없이 현재 화면에서 바로 녹화 시작 가능
- 분석 결과를 자동으로 JSONL, CSV, JSON 형식의 데이터셋으로 변환 제공
- 얼굴 감지 기반 전처리 및 정적 화면 보정 알고리즘으로 오탐률 감소

### 5) 프로젝트가 필요한 이유

#### 사회적 필요성
- **가짜 정보 확산 방지**: 딥페이크 기술의 발전으로 인해 조작된 영상이 소셜 미디어를 통해 빠르게 확산되고 있음. 이를 즉시 검증할 수 있는 도구가 필수적
- **사용자 보호**: 정치적 선동, 금전적 사기, 명예훼손 등 딥페이크 악용 사례 증가로 인한 개인 및 사회적 피해 예방
- **정보 리터러시 향상**: 일반 사용자도 쉽게 사용할 수 있는 도구 제공으로 미디어 리터러시 교육 및 실천 도구로 활용

#### 기술적 필요성
- **모바일 중심 환경**: 현재 사용자들의 대부분이 모바일 기기를 통해 콘텐츠를 소비하므로, 모바일 환경에 최적화된 탐지 도구 필요
- **실시간 처리 요구**: 딥페이크 영상의 확산 속도에 대응하기 위해 즉시 검증이 가능한 시스템 필요
- **연구 데이터 축적**: 딥페이크 탐지 모델의 지속적인 개선을 위한 고품질 데이터셋 생성 도구 필요

#### 시장적 필요성
- **B2C 시장**: 일반 소비자 대상 정보 검증 도구
- **B2B 시장**: 미디어 기업, 플랫폼 서비스, 보안 기업 등에 기술 라이선싱 또는 API 제공
- **연구 시장**: 대학 및 연구기관 대상 데이터셋 생성 도구 및 분석 플랫폼 제공

### 6) 목표 사용자

#### Primary Users (주요 사용자)
1. **일반 소비자 (18-45세)**
   - 소셜 미디어를 활발히 사용하는 사용자
   - 정보 검증에 관심이 있는 사용자
   - 딥페이크에 대한 우려가 있는 사용자

2. **미디어 전문가 및 저널리스트**
   - 뉴스 확인 및 팩트체크를 수행하는 전문가
   - 소셜 미디어 콘텐츠를 검증해야 하는 미디어 관계자

#### Secondary Users (부차적 사용자)
3. **연구자 및 개발자**
   - 딥페이크 탐지 모델 연구를 수행하는 연구자
   - 딥러닝 데이터셋이 필요한 연구자
   - 컴퓨터 비전 연구자

4. **교육 관계자**
   - 미디어 리터러시 교육을 수행하는 교사
   - 디지털 시민 교육 프로그램 운영자

5. **기업 및 조직**
   - 콘텐츠 검증이 필요한 플랫폼 서비스 기업
   - 보안 및 인증 서비스를 제공하는 기업

---

## 2. 핵심 기능

### 1) Must (없으면 성립 불가)

#### 백엔드 기능
- ✅ **딥페이크 탐지 API**: 비디오 파일을 받아 딥페이크 여부를 분석하고 결과 반환
- ✅ **딥러닝 모델 추론**: Hugging Face Transformers를 활용한 Vision Transformer 모델 앙상블 추론
- ✅ **비디오 처리**: OpenCV를 활용한 영상 프레임 추출 및 전처리
- ✅ **얼굴 감지**: OpenCV Haar Cascade를 활용한 얼굴 감지 및 프레임 필터링
- ✅ **타임라인 생성**: 프레임별 분석 결과를 시간 구간별 세그먼트로 그룹화
- ✅ **결과 API**: 분석 결과를 JSON 형식으로 반환

#### 프론트엔드 기능
- ✅ **비디오 녹화**: 카메라를 통한 직접 녹화 또는 앨범에서 영상 선택
- ✅ **비디오 업로드**: 백엔드 API로 영상 파일 전송
- ✅ **분석 결과 표시**: 딥페이크 확률 및 타임라인 정보 시각화
- ✅ **사용자 인터페이스**: 직관적인 UI/UX 제공

### 2) Should (있으면 UX 향상)

#### 백엔드 기능
- ✅ **동적 프레임 샘플링**: 영상 길이에 따라 최적의 프레임 추출 간격 자동 조정
  - 5초 이하: 0.5초 간격
  - 10초 이하: 1초 간격
  - 30초 이하: 2초 간격
  - 30초 초과: 3초 간격
- ✅ **정적 화면 보정**: 정적 화면의 오탐을 방지하기 위한 confidence 보정 알고리즘
- ✅ **병렬 처리**: ProcessPoolExecutor를 활용한 멀티프로세싱으로 분석 속도 향상
- ✅ **데이터셋 생성**: JSONL, CSV, JSON 형식의 데이터셋 자동 변환 및 다운로드
- ✅ **Firebase 통합**: 영상 저장 및 관리 기능

#### 프론트엔드 기능
- ✅ **플로팅 위젯**: Android MediaProjection API를 활용한 실시간 스크린 레코딩
  - 앱 전환 없이 현재 화면 녹화 가능
  - 15초 자동 종료 기능
  - 백그라운드 Foreground Service 실행
- ✅ **분석 진행 상태 표시**: 분석 중 모달 및 로딩 인디케이터
- ✅ **결과 시각화**: 타임라인 세그먼트를 그래프로 표시
- ✅ **데이터셋 다운로드**: 모바일 브라우저를 통한 파일 다운로드
- ✅ **오류 처리**: 네트워크 오류, 분석 실패 등 에러 상황 처리

### 3) Could (있으면 재미/부가가치)

#### 백엔드 기능
- 🔄 **음성 분석**: Whisper를 활용한 음성 인식 및 음성 기반 딥페이크 탐지
- 🔄 **비동기 처리**: 대용량 영상 처리를 위한 비동기 분석 큐 시스템
- 🔄 **배치 처리**: 여러 영상을 한 번에 분석하는 배치 API
- 🔄 **모델 버전 관리**: 여러 모델 버전 관리 및 A/B 테스트 기능
- 🔄 **분석 리포트 생성**: PDF/Excel 형식의 상세 분석 리포트 생성

#### 프론트엔드 기능
- 🔄 **히스토리 관리**: 분석 기록 저장 및 조회 기능
- 🔄 **공유 기능**: 분석 결과를 소셜 미디어에 공유
- 🔄 **신고 기능**: 딥페이크로 판단된 영상을 플랫폼에 신고
- 🔄 **커뮤니티**: 사용자 간 분석 결과 공유 및 토론
- 🔄 **알림 설정**: 특정 확률 이상의 딥페이크 탐지 시 알림
- 🔄 **다크 모드**: 다크 테마 지원
- 🔄 **다국어 지원**: 여러 언어 지원

---

## 3. 사용자 시나리오

### 시나리오 1: 플로팅 위젯을 통한 실시간 탐지 (주요 사용 시나리오)

```
[사용자 액션] → [시스템 응답]

1. 사용자가 유튜브에서 의심스러운 영상 발견
   ↓
2. 딥페이크 탐지 앱 실행
   ↓
3. HomeScreen에서 "위젯 제어" 선택
   ↓
4. WidgetControlScreen에서 "Switch ON!" 클릭
   ↓
5. 시스템 권한 요청 다이얼로그 표시
   ↓
6. 사용자가 권한 허용
   ↓
7. 홈 화면으로 자동 이동
   ↓
8. 플로팅 녹화 버튼이 화면에 표시됨
   ↓
9. 사용자가 유튜브 앱으로 돌아가서 의심스러운 영상 재생
   ↓
10. 플로팅 버튼 클릭하여 녹화 시작
    ↓
11. MediaProjection 권한 요청 다이얼로그 표시
    ↓
12. 사용자가 권한 허용
    ↓
13. 백그라운드에서 화면 녹화 시작 (최대 15초)
    ↓
14. 15초 경과 또는 사용자가 수동 종료
    ↓
15. "녹화 완료" 토스트 알림 표시
    ↓
16. "분석하시겠습니까?" 팝업 표시
    ↓
17. 사용자가 "예" 선택
    ↓
18. RecordScreen으로 이동
    ↓
19. "분석 중..." 모달 표시
    ↓
20. 백엔드 API로 영상 전송
    ↓
21. 백엔드에서 딥러닝 모델로 분석 수행
    ↓
22. 분석 결과 수신 (딥페이크 확률, 타임라인)
    ↓
23. "딥페이크 확률: 65%" 모달 표시
    ↓
24. ResultScreen으로 이동하여 상세 결과 확인
    ↓
25. 타임라인에서 딥페이크로 탐지된 구간 확인
    ↓
26. "데이터셋 다운로드" 버튼으로 연구용 데이터 다운로드
```

### 시나리오 2: 직접 녹화를 통한 탐지

```
[사용자 액션] → [시스템 응답]

1. 딥페이크 탐지 앱 실행
   ↓
2. HomeScreen에서 "녹화" 선택
   ↓
3. RecordScreen으로 이동
   ↓
4. 카메라 녹화 시작 또는 앨범에서 영상 선택
   ↓
5. 녹화 완료 후 "분석" 버튼 클릭
   ↓
6. 백엔드로 영상 업로드 및 분석
   ↓
7. 분석 결과 표시
   ↓
8. 결과 화면에서 상세 정보 확인
```

### 시나리오 3: 데이터셋 생성 및 연구 활용

```
[연구자 액션] → [시스템 응답]

1. 연구자가 딥페이크 탐지 앱 실행
   ↓
2. 여러 영상을 녹화 및 분석
   ↓
3. 각 분석 결과에서 "데이터셋 다운로드" 클릭
   ↓
4. JSONL, CSV, JSON 파일 다운로드
   ↓
5. 다운로드된 파일을 딥러닝 모델 학습에 활용
   ↓
6. 데이터셋을 통해 모델 성능 개선 연구 수행
```

### 사용자 여정 다이어그램

```
┌─────────────────────────────────────────────────────────────┐
│                    딥페이크 탐지 앱 사용자 여정                 │
└─────────────────────────────────────────────────────────────┘

[의심스러운 영상 발견]
        │
        ▼
┌──────────────────┐
│  앱 실행         │
│  (HomeScreen)    │
└────────┬─────────┘
         │
    ┌────┴────┐
    │         │
    ▼         ▼
┌────────┐  ┌──────────────┐
│ 위젯   │  │ 직접 녹화/    │
│ 제어   │  │ 업로드        │
└───┬────┘  └──────┬───────┘
    │              │
    ▼              │
┌──────────────┐   │
│ 플로팅 위젯  │   │
│ 녹화 시작    │   │
└──────┬───────┘   │
       │           │
       └─────┬─────┘
             │
             ▼
      ┌──────────────┐
      │ 영상 분석     │
      │ (백엔드 API)  │
      └──────┬───────┘
             │
             ▼
      ┌──────────────┐
      │ 결과 표시     │
      │ (ResultScreen)│
      └──────┬───────┘
             │
        ┌────┴────┐
        │         │
        ▼         ▼
┌────────────┐  ┌──────────────┐
│ 결과 확인   │  │ 데이터셋      │
│ 및 공유     │  │ 다운로드      │
└────────────┘  └──────────────┘
```

---

## 4. 기술 요구사항 & 제약

### 1) 클라이언트/백엔드/AI/DB 등 기술 스택

#### 프론트엔드 (React Native)
- **프레임워크**: React Native (Expo ~51.0.0)
- **언어**: TypeScript
- **네비게이션**: React Navigation (Stack Navigator)
- **상태 관리**: React Hooks (useState, useEffect)
- **네이티브 모듈**: Kotlin (Android Native Modules)
  - FloatingService (MediaProjection API)
  - Foreground Service
- **외부 라이브러리**:
  - expo-camera: 카메라 접근
  - expo-av: 비디오 재생
  - expo-file-system: 파일 시스템 접근
  - axios: HTTP 클라이언트
  - firebase: Firebase Storage
- **플랫폼**: Android (API Level 23 이상)

#### 백엔드 (FastAPI)
- **프레임워크**: FastAPI
- **언어**: Python 3.8 이상
- **비동기 처리**: asyncio, ProcessPoolExecutor
- **비디오 처리**: OpenCV (cv2)
- **딥러닝**: 
  - PyTorch
  - Hugging Face Transformers
  - 모델: Deep-Fake-Detector-v2-Model, google/vit-base-patch16-224-in21k
- **데이터 처리**: 
  - NumPy
  - PIL (Pillow)
  - pandas (CSV 생성)
- **서버**: Uvicorn (ASGI)
- **저장소**: Firebase Storage (Firebase Admin SDK)

#### 인프라 및 도구
- **버전 관리**: Git, GitHub
- **빌드 도구**: 
  - Gradle (Android)
  - npm/yarn (Node.js)
- **개발 환경**: 
  - Android Studio
  - VS Code / Cursor
  - Python venv

### 2) 제약 및 리스크

#### 기술적 제약

1. **Android 플랫폼 제한**
   - 현재 Android만 지원 (iOS 미지원)
   - Android 6.0 (API Level 23) 이상 필요
   - MediaProjection API는 Android 5.0 이상에서만 사용 가능
   - **리스크**: iOS 사용자 배제로 시장 접근성 제한

2. **성능 제약**
   - 딥러닝 모델 추론은 CPU에서 수행 시 시간 소요 (GPU 미사용 시)
   - 영상 길이에 따라 분석 시간이 선형적으로 증가
   - **리스크**: 대용량 영상 처리 시 사용자 대기 시간 증가

3. **메모리 제약**
   - 모바일 기기의 제한된 메모리로 인한 큰 영상 처리 어려움
   - 딥러닝 모델 로딩 시 메모리 사용량 증가
   - **리스크**: 저사양 기기에서 앱 크래시 가능성

4. **네트워크 의존성**
   - 백엔드 API 통신 필수
   - 영상 파일 업로드 시 네트워크 대역폭 필요
   - **리스크**: 오프라인 환경에서 사용 불가

5. **프레임 샘플링 제한**
   - 동적 프레임 샘플링으로 인한 일부 프레임 누락 가능
   - **리스크**: 짧은 구간의 딥페이크를 놓칠 수 있음

#### 비용 관련 제약

1. **API 서버 운영 비용**
   - 클라우드 서버 (AWS, GCP 등) 운영 비용
   - GPU 인스턴스 사용 시 비용 증가
   - **리스크**: 사용자 증가 시 운영 비용 급증

2. **Firebase Storage 비용**
   - 영상 저장 시 스토리지 사용량 증가
   - 대역폭 사용량 증가
   - **리스크**: 사용량 증가에 따른 비용 증가

3. **모델 다운로드 비용**
   - Hugging Face 모델 다운로드 시 초기 비용
   - 모델 업데이트 시 재다운로드 필요

#### 보안 문제

1. **민감 정보 처리**
   - 사용자 영상 파일이 서버로 전송됨
   - Firebase 키 파일 관리 필요
   - **리스크**: 데이터 유출 시 개인정보 침해

2. **권한 요청**
   - MediaProjection 권한은 민감한 권한
   - 사용자 신뢰도가 중요
   - **리스크**: 권한 요청 거부로 인한 기능 사용 불가

3. **API 보안**
   - 현재 CORS가 모든 origin 허용 (개발용)
   - **리스크**: 프로덕션 환경에서 보안 취약점

#### 정확도 관련 제약

1. **모델 한계**
   - 딥러닝 모델의 본질적 한계 (100% 정확도 불가능)
   - 새로운 딥페이크 기술에 대한 대응 지연
   - **리스크**: 오탐 및 미탐 가능성

2. **정적 화면 보정**
   - 정적 화면 보정 알고리즘이 일부 경우 부정확할 수 있음
   - **리스크**: 실제 딥페이크를 놓칠 수 있음

#### 확장성 제약

1. **동시 처리 제한**
   - 단일 서버에서 동시 처리 가능한 요청 수 제한
   - **리스크**: 트래픽 증가 시 서비스 다운 가능성

2. **모델 버전 관리**
   - 현재 단일 모델 버전만 지원
   - 모델 업데이트 시 서비스 중단 필요
   - **리스크**: 사용자 경험 저하

---

## 5. 향후 계획

### 1) 최소 달성 목표 (MVP - Minimum Viable Product)

#### 단기 목표 (1-3개월)
- ✅ **기본 기능 완성**: 현재 구현 완료
  - 플로팅 위젯 기반 스크린 레코딩
  - 딥러닝 모델 앙상블 탐지
  - 타임라인 기반 결과 표시
  - 데이터셋 다운로드 기능

- 🔄 **안정성 개선**
  - 오류 처리 강화
  - 네트워크 오류 시 재시도 로직
  - 메모리 누수 방지
  - 성능 최적화

- 🔄 **사용자 경험 개선**
  - 분석 진행률 표시
  - 결과 화면 UI/UX 개선
  - 다크 모드 지원

- 🔄 **문서화 완성**
  - 사용자 가이드 작성
  - API 문서화
  - 개발자 가이드 작성

#### 중기 목표 (3-6개월)
- 🔄 **iOS 지원**
  - React Native iOS 빌드
  - iOS 화면 녹화 기능 구현
  - iOS 권한 처리

- 🔄 **성능 최적화**
  - GPU 서버 활용으로 분석 속도 향상
  - 모델 경량화
  - 프레임 샘플링 알고리즘 개선

- 🔄 **보안 강화**
  - API 인증 시스템 구현
  - 데이터 암호화
  - Firebase 보안 규칙 강화

- 🔄 **분석 기능 확장**
  - 음성 분석 기능 추가 (Whisper)
  - 오디오 기반 딥페이크 탐지
  - 멀티모달 분석 (영상 + 음성)

### 2) 발전 방향

#### 장기 목표 (6개월 이상)

1. **AI/ML 개선**
   - 더 정확한 딥페이크 탐지 모델 개발
   - 실시간 스트리밍 분석 지원
   - 다양한 딥페이크 기술 탐지 (FaceSwap, DeepFaceLab 등)
   - 자체 딥러닝 모델 학습 및 배포

2. **플랫폼 확장**
   - **웹 버전**: 브라우저에서 사용 가능한 웹 애플리케이션
   - **데스크톱 버전**: Windows, macOS, Linux 지원
   - **브라우저 확장 프로그램**: Chrome, Firefox 확장 프로그램 개발
   - **API 서비스**: 타사 서비스에 API 제공

3. **기능 확장**
   - **히스토리 관리**: 분석 기록 저장 및 조회
   - **공유 기능**: 소셜 미디어 공유
   - **신고 시스템**: 플랫폼별 딥페이크 신고 연동
   - **커뮤니티**: 사용자 간 정보 공유 및 토론
   - **알림 시스템**: 특정 확률 이상 탐지 시 알림

4. **비즈니스 모델**
   - **Freemium 모델**: 기본 기능 무료, 고급 기능 유료
   - **B2B 라이선싱**: 미디어 기업, 플랫폼 서비스에 기술 제공
   - **API 서비스**: 개발자 대상 API 구독 서비스
   - **데이터셋 판매**: 고품질 딥페이크 데이터셋 판매

5. **연구 및 개발**
   - **오픈소스화**: 일부 기능 오픈소스로 공개
   - **학술 논문 발표**: 딥페이크 탐지 연구 성과 공유
   - **연구 협력**: 대학 및 연구기관과 협력 연구
   - **데이터셋 공개**: 연구용 데이터셋 공개

6. **사회적 기여**
   - **교육 프로그램**: 미디어 리터러시 교육 콘텐츠 제공
   - **팩트체크 파트너십**: 팩트체크 기관과 협력
   - **정책 제안**: 딥페이크 규제 정책 제안
   - **국제 협력**: 글로벌 딥페이크 대응 네트워크 참여

#### 기술 로드맵

```
Q1 (1-3개월)
├── 안정성 개선
├── UX 개선
└── 문서화 완성

Q2 (4-6개월)
├── iOS 지원
├── 성능 최적화
├── 보안 강화
└── 음성 분석 추가

Q3 (7-9개월)
├── 웹 버전 개발
├── 모델 개선
├── API 서비스 출시
└── 히스토리/공유 기능

Q4 (10-12개월)
├── 브라우저 확장 프로그램
├── 커뮤니티 기능
├── B2B 서비스 시작
└── 오픈소스화
```

---

## 결론

딥페이크 탐지 앱은 모바일 환경에서 실시간으로 딥페이크를 탐지할 수 있는 혁신적인 도구입니다. 플로팅 위젯 기반 스크린 레코딩과 딥러닝 모델 앙상블을 통해 사용자에게 즉시성과 정확성을 제공하며, 향후 다양한 플랫폼과 기능으로 확장하여 가짜 정보 확산 방지에 기여할 수 있습니다.

---

*작성일: 2024년*
*프로젝트 버전: 1.0.0*









